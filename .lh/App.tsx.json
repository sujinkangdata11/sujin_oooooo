{
    "sourceFile": "App.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1756017036804,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1756017036804,
            "name": "Commit-0",
            "content": "/**\n * @license\n * SPDX-License-Identifier: Apache-2.0\n*/\n/* tslint:disable */\n// Copyright 2024 Google LLC\n\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n\n//     https://www.apache.org/licenses/LICENSE-2.0\n\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport c from 'classnames';\nimport {useRef, useState, useEffect} from 'react';\nimport {generateContent} from './api';\nimport {generateVoice, playAudioBuffer} from './tts';\nimport functions from './functions';\nimport modes from './modes';\nimport {timeToSecs} from './utils';\n\nimport VideoPlayer from './VideoPlayer.jsx';\n\n\nfunction extractYoutubeId(url) {\n  if (!url) return null;\n  const regExp =\n    /^.*(youtu.be\\/|v\\/|u\\/\\w\\/|embed\\/|shorts\\/|watch\\?v=|\\&v=)([^#\\&\\?]*).*/;\n  const match = url.match(regExp);\n  return match && match[2].length === 11 ? match[2] : null;\n}\n\nexport default function App() {\n  const [youtubeUrlInput, setYoutubeUrlInput] = useState('');\n  const [youtubeVideoId, setYoutubeVideoId] = useState(null);\n  const [timecodeList, setTimecodeList] = useState(null);\n  const [requestedTimecode, setRequestedTimecode] = useState(null);\n  const [selectedMode, setSelectedMode] = useState(Object.keys(modes)[0]);\n  const [activeMode, setActiveMode] = useState<string | undefined>();\n  const [isLoading, setIsLoading] = useState(false);\n  const [showSidebar, setShowSidebar] = useState(true);\n  const [customPrompt, setCustomPrompt] = useState('');\n  const [apiKey, setApiKey] = useState('');\n  const [uploadedFiles, setUploadedFiles] = useState({\n    example1: null,\n    example2: null,\n    example3: null\n  });\n  const [expandedModes, setExpandedModes] = useState<Record<string, boolean>>({});\n  const [uploadedVideo, setUploadedVideo] = useState<File | null>(null);\n  const [inputMode, setInputMode] = useState<'url' | 'upload'>('url');\n  const [selectedLanguage, setSelectedLanguage] = useState<string>('í•œêµ­ì–´');\n  const [analysisResult, setAnalysisResult] = useState<string>('');\n  const [rewrittenResult, setRewrittenResult] = useState<string>('');\n  const [isLoadingRewrite, setIsLoadingRewrite] = useState<boolean>(false);\n  const [expandedAnalysis, setExpandedAnalysis] = useState<string>('');\n  const [selectedAnalysisType, setSelectedAnalysisType] = useState<string>('');\n  const [customAnalysisPrompt, setCustomAnalysisPrompt] = useState<string>('');\n  \n  // 4ë²ˆì§¸ ì¹¼ëŸ¼ìš© ìƒíƒœ\n  const [selectedLanguage2, setSelectedLanguage2] = useState<string>('í•œêµ­ì–´');\n  const [analysisResult2, setAnalysisResult2] = useState<string>('');\n  const [expandedAnalysis2, setExpandedAnalysis2] = useState<string>('');\n  const [selectedAnalysisType2, setSelectedAnalysisType2] = useState<string>('');\n  const [customAnalysisPrompt2, setCustomAnalysisPrompt2] = useState<string>('');\n  \n  // 5ë²ˆì§¸ ì¹¼ëŸ¼ìš© ìƒíƒœ\n  const [selectedLanguage3, setSelectedLanguage3] = useState<string>('í•œêµ­ì–´');\n  const [analysisResult3, setAnalysisResult3] = useState<string>('');\n  const [expandedAnalysis3, setExpandedAnalysis3] = useState<string>('');\n  const [selectedAnalysisType3, setSelectedAnalysisType3] = useState<string>('');\n  const [customAnalysisPrompt3, setCustomAnalysisPrompt3] = useState<string>('');\n  \n  // ìŒì„± ì„ íƒ ìƒíƒœ\n  const voiceOptions = [\n    'youngsu', 'changhee', 'jimin', 'sujin', 'minjun',\n    'yena', 'jihun', 'eunji', 'yejun', 'hunyoung',\n    'yejin', 'minjin', 'jihyun', 'eunsu', 'yedam'\n  ];\n  const [selectedVoice, setSelectedVoice] = useState<string>('youngsu');\n  \n  const handleFileUpload = (fileNumber: string, file: File) => {\n    setUploadedFiles(prev => ({\n      ...prev,\n      [fileNumber]: { name: file.name, file }\n    }));\n  };\n\n  const handleFileDelete = (fileNumber: string) => {\n    setUploadedFiles(prev => ({\n      ...prev,\n      [fileNumber]: null\n    }));\n  };\n\n  const handleRewriteWithExamples = async () => {\n    const uploadedExamples = Object.values(uploadedFiles).filter(file => file !== null);\n    \n    if (uploadedExamples.length === 0) {\n      alert('ë¨¼ì € ì˜ˆì‹œ íŒŒì¼ì„ ì—…ë¡œë“œí•´ì£¼ì„¸ìš”.');\n      return;\n    }\n\n    if (!analysisResult2) {\n      alert('ë¨¼ì € ëŒ€ì‚¬ë¥¼ ìƒì„±í•´ì£¼ì„¸ìš”.');\n      return;\n    }\n\n    if (!apiKey.trim()) {\n      alert('Gemini API í‚¤ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');\n      return;\n    }\n\n    setIsLoadingRewrite(true);\n\n    try {\n      // ì—…ë¡œë“œëœ íŒŒì¼ë“¤ì˜ ë‚´ìš©ì„ ì½ê¸°\n      const exampleContents = await Promise.all(\n        uploadedExamples.map(async (fileData) => {\n          return new Promise((resolve, reject) => {\n            const reader = new FileReader();\n            reader.onload = (e) => {\n              console.log('íŒŒì¼ ì½ê¸° ì„±ê³µ:', fileData.name, e.target?.result);\n              resolve(e.target?.result);\n            };\n            reader.onerror = (e) => {\n              console.error('íŒŒì¼ ì½ê¸° ì‹¤íŒ¨:', fileData.name, e);\n              reject(e);\n            };\n            reader.readAsText(fileData.file);\n          });\n        })\n      );\n\n      console.log('ì½ì–´ì˜¨ ì˜ˆì‹œë“¤:', exampleContents);\n      \n      const examplesText = exampleContents.map((content, index) => \n        `-0${index + 1} ì˜ˆì‹œ-\\n${content}\\n-0${index + 1} ì˜ˆì‹œ ë-`\n      ).join('\\n\\n');\n\n      const rewritePrompt = `ë‹¤ìŒì€ í˜„ì¬ ìƒì„±ëœ ëŒ€ì‚¬ì…ë‹ˆë‹¤:\n\n${analysisResult2}\n\në‹¤ìŒì€ ë‚´ê°€ ì›í•˜ëŠ” ìŠ¤íƒ€ì¼ì˜ ì˜ˆì‹œë“¤ì…ë‹ˆë‹¤:\n\n${examplesText}\n\nìœ„ ì˜ˆì‹œë“¤ì˜ ìŠ¤íƒ€ì¼ì„ ì°¸ê³ í•´ì„œ í˜„ì¬ ëŒ€ì‚¬ë¥¼ ë‹¤ì‹œ ì‘ì„±í•´ì£¼ì„¸ìš”. ì˜ˆì‹œë“¤ì˜ í†¤, ë¬¸ì²´, í‘œí˜„ ë°©ì‹ì„ ë¶„ì„í•´ì„œ ë™ì¼í•œ ìŠ¤íƒ€ì¼ë¡œ ëŒ€ì‚¬ë¥¼ ì¬ì‘ì„±í•´ì£¼ì„¸ìš”. ê° ì˜ˆì‹œì˜ ë¶„ëŸ‰ë§Œí¼ë§Œ ì ì–´ì£¼ì„¸ìš”. ì¦‰, ê³µë°±í¬í•¨ 300ì ì´ë‚´ë¡œ ì ì–´ì£¼ì„¸ìš”.`;\n\n      const response = await generateContent(\n        rewritePrompt,\n        [],\n        `https://www.youtube.com/watch?v=${youtubeVideoId}`,\n        apiKey,\n      );\n\n      console.log('ì¬ì‘ì„± ì‘ë‹µ:', response);\n      const rewrittenText = response.candidates?.[0]?.content?.parts?.[0]?.text || 'ì¬ì‘ì„± ê²°ê³¼ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.';\n      setRewrittenResult(rewrittenText);\n      \n    } catch (error) {\n      console.error('ì¬ì‘ì„± ì—ëŸ¬:', error);\n      alert('ì¬ì‘ì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');\n    } finally {\n      setIsLoadingRewrite(false);\n    }\n  };\n  const [showVoiceDropdown, setShowVoiceDropdown] = useState<boolean>(false);\n  const [isExtractingKeywords, setIsExtractingKeywords] = useState<boolean>(false);\n  const [extractedKeywords, setExtractedKeywords] = useState<string>('');\n  const [isLoadingGenerate, setIsLoadingGenerate] = useState<boolean>(false);\n  const [isLoadingAnalysis, setIsLoadingAnalysis] = useState<boolean>(false);\n  const [isLoadingScript, setIsLoadingScript] = useState<boolean>(false);\n  const [scriptText, setScriptText] = useState<string>('');\n  const [isGeneratingVoice, setIsGeneratingVoice] = useState<boolean>(false);\n  const [generatedAudio, setGeneratedAudio] = useState<ArrayBuffer | null>(null);\n  const [isPlaying, setIsPlaying] = useState<boolean>(false);\n  const [currentAudio, setCurrentAudio] = useState<HTMLAudioElement | null>(null);\n  const [previewAudio, setPreviewAudio] = useState<HTMLAudioElement | null>(null);\n  const [isPreviewPlaying, setIsPreviewPlaying] = useState<string | null>(null);\n  const [currentTime, setCurrentTime] = useState<number>(0);\n  const [duration, setDuration] = useState<number>(0);\n  const [theme] = useState(\n    window.matchMedia('(prefers-color-scheme: dark)').matches\n      ? 'dark'\n      : 'light',\n  );\n  const scrollRef = useRef<HTMLElement>(null);\n  \n  // ê° ì¹¼ëŸ¼ ref ì¶”ê°€\n  const videoColumnRef = useRef<HTMLDivElement>(null);\n  const buttonColumnRef = useRef<HTMLDivElement>(null);\n  const whiteColumnRef = useRef<HTMLDivElement>(null);\n  const fourthColumnRef = useRef<HTMLDivElement>(null);\n  const fifthColumnRef = useRef<HTMLDivElement>(null);\n  const sixthColumnRef = useRef<HTMLDivElement>(null);\n  const isCustomMode = selectedMode === 'ì»¤ìŠ¤í…€';\n\n  // ì‹œê°„ í¬ë§· í•¨ìˆ˜ (ì´ˆ -> MM:SS)\n  const formatTime = (seconds: number): string => {\n    if (isNaN(seconds)) return '0:00';\n    const mins = Math.floor(seconds / 60);\n    const secs = Math.floor(seconds % 60);\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  // ìˆœí™˜ ë¡œë”© ë©”ì‹œì§€ ì»´í¬ë„ŒíŠ¸\n  const LoadingMessage = ({ type = 'default' }: { type?: 'default' | 'voice' }) => {\n    const [currentMessageIndex, setCurrentMessageIndex] = useState(0);\n    \n    const defaultMessages = [\n      \"ì¡°ê¸ˆë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”.\",\n      \"ì‘ì—… ì¤‘ì…ë‹ˆë‹¤\",\n      \"ê¸€ì„ ë‹¤ë“¬ê³  ìˆìŠµë‹ˆë‹¤.\"\n    ];\n    \n    const voiceMessages = [\n      \"ğŸ”„ ìŒì„± ìƒì„± ì¤‘...\",\n      \"ì¡°ê¸ˆë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”\",\n      \"ê³§ ìŒì„±ì´ ë‚˜ì˜µë‹ˆë‹¤.\"\n    ];\n    \n    const loadingMessages = type === 'voice' ? voiceMessages : defaultMessages;\n\n    useEffect(() => {\n      const interval = setInterval(() => {\n        setCurrentMessageIndex(prev => (prev + 1) % loadingMessages.length);\n      }, 1500);\n\n      return () => clearInterval(interval);\n    }, [loadingMessages.length]);\n\n    return (\n      <div style={{\n        marginTop: '10px',\n        textAlign: 'center',\n        color: '#666',\n        fontSize: '14px',\n        fontStyle: 'italic'\n      }}>\n        {loadingMessages[currentMessageIndex]}\n      </div>\n    );\n  };\n\n  // ì¹¼ëŸ¼ ì¤‘ì•™ ì •ë ¬ í•¨ìˆ˜\n  const scrollToColumn = (columnRef: React.RefObject<HTMLDivElement>) => {\n    if (columnRef.current) {\n      columnRef.current.scrollIntoView({\n        behavior: 'smooth',\n        block: 'nearest',\n        inline: 'center'\n      });\n    }\n  };\n\n  const setTimecodes = ({timecodes}) =>\n    setTimecodeList(\n      timecodes.map((t) => ({...t, text: t.text.replaceAll(\"\\\\'\", \"'\")})),\n    );\n\n  const onModeSelect = async (mode: string) => {\n    setActiveMode(mode);\n    // setSelectedModeëŠ” ìœ ì§€ - ì‚¬ìš©ìê°€ ì„ íƒí•œ ëª¨ë“œ ê·¸ëŒ€ë¡œ ìœ ì§€\n    setIsLoadingGenerate(true);\n\n    const functionDeclarations = [\n      {\n        name: 'set_timecodes',\n        description: 'Set the timecodes for the video with associated text',\n        parameters: {\n          type: 'object',\n          properties: {\n            timecodes: {\n              type: 'array',\n              items: {\n                type: 'object',\n                properties: {\n                  time: { type: 'string' },\n                  text: { type: 'string' }\n                },\n                required: ['time', 'text']\n              }\n            }\n          },\n          required: ['timecodes']\n        }\n      }\n    ];\n\n    const resp = await generateContent(\n      isCustomMode\n        ? modes[mode].prompt(customPrompt)\n        : modes[mode].prompt,\n      functionDeclarations,\n      `https://www.youtube.com/watch?v=${youtubeVideoId}`,\n      apiKey,\n    );\n\n    console.log('ì‘ë‹µ ê°ì²´:', resp);\n    console.log('ì‘ë‹µ candidates:', resp.candidates);\n    console.log('ì²« ë²ˆì§¸ candidate:', resp.candidates?.[0]);\n    console.log('candidate content:', resp.candidates?.[0]?.content);\n    console.log('content parts:', resp.candidates?.[0]?.content?.parts);\n    console.log('ì²« ë²ˆì§¸ part:', resp.candidates?.[0]?.content?.parts?.[0]);\n    \n    // ë‹¤ì–‘í•œ ì‘ë‹µ êµ¬ì¡° ì²´í¬\n    console.log('ì „ì²´ ì‘ë‹µ êµ¬ì¡°:', JSON.stringify(resp, null, 2));\n    \n    const call = resp.candidates?.[0]?.content?.parts?.[0]?.functionCall || \n                 resp.candidates?.[0]?.content?.parts?.[0]?.function_call ||\n                 resp.functionCalls?.[0] ||\n                 resp.function_calls?.[0];\n    console.log('í•¨ìˆ˜ í˜¸ì¶œ:', call);\n\n    if (call && call.name === 'set_timecodes') {\n      setTimecodes(call.args);\n    } else if (resp.candidates?.[0]?.content?.parts?.[0]?.text) {\n      // í•¨ìˆ˜ í˜¸ì¶œì´ ì—†ìœ¼ë©´ ì¼ë°˜ í…ìŠ¤íŠ¸ ì‘ë‹µì„ timecodeë¡œ ì²˜ë¦¬\n      const responseText = resp.candidates[0].content.parts[0].text;\n      setTimecodeList([{\n        time: '0:00',\n        text: responseText\n      }]);\n    }\n\n    setIsLoadingGenerate(false);\n    scrollRef.current?.scrollTo({top: 0});\n  };\n\n  const handleLoadVideo = (e) => {\n    e.preventDefault();\n    const videoId = extractYoutubeId(youtubeUrlInput);\n    if (videoId) {\n      setYoutubeVideoId(videoId);\n      setTimecodeList(null);\n      setActiveMode(null);\n    } else {\n      alert('Invalid YouTube URL. Please enter a valid URL.');\n    }\n  };\n\n  const analysisTypes = {\n    'ê¸°ë³¸': 'ì´ ë‚´ìš©ì„ í•œ ê¸€ìë„ ë¹ ì§ì—†ì´ ë²ˆì—­í•´ì£¼ê³ , ì–´ë–¤ ìƒí™©ì¸ì§€ ìì—°ìŠ¤ëŸ½ê³  ë””í…Œì¼í•˜ê²Œ ì „ë¬¸ê°€ì²˜ëŸ¼ ì„¤ëª…í•´ì£¼ì„¸ìš”.\\\\n\\\\nex) \\\\n1. í•œê¸€ë²ˆì—­\\\\n00:02-00:03 ã…£ ì´ ê¸°êµ¬ëŠ” ì •ë§ ë†€ëìŠµë‹ˆë‹¤.\\\\n00:03-00:06 ã…£ ë°–ì—ì„œ ë¶€í„° ì‹œì‘ë˜ëŠ” ì‚¬ìƒì´ˆìœ ì˜\\\\n.\\\\n.\\\\nâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\\\\n2. ê´€ì ì—ì„œ ì„¤ëª… ì‹œì‘',\n    'ì—­ì‚¬ì  ê´€ì ': 'ì´ ë‚´ìš©ì„ í•œ ê¸€ìë„ ë¹ ì§ì—†ì´ ë²ˆì—­í•´ì£¼ê³ , ì—­ì‚¬ì  ê´€ì ì—ì„œ ì´ ìƒí™©ì´ ì–´ë–¤ ìƒí™©ì´ê³ , ì–´ëŠ ë‚˜ë¼ ë¬¸í™”ì´ë©°, ì–´ë–¤ ë‚´ìš©ì— ê¸°ì¸ë˜ì–´ ì´ ìƒí™©ì´ ìƒê²¼ëŠ”ì§€, ì—­ì‚¬ì  ê´€ì ì—ì„œ ë””í…Œì¼í•˜ê²Œ ì„¤ëª…í•´ì£¼ì„¸ìš”. ì—­ì‚¬ì  ì‚¬ì‹¤ì— ê¸°ë°˜ìœ¼ë¡œ ì‹ ë¢°ì„±ìˆê²Œ ì„¤ëª…í•´ì£¼ì„¸ìš”.\\\\n\\\\nex) \\\\n1. í•œê¸€ë²ˆì—­\\\\n00:02-00:03 ã…£ ì´ ê¸°êµ¬ëŠ” ì •ë§ ë†€ëìŠµë‹ˆë‹¤.\\\\n00:03-00:06 ã…£ ë°–ì—ì„œ ë¶€í„° ì‹œì‘ë˜ëŠ” ì‚¬ìƒì´ˆìœ ì˜\\\\n.\\\\n.\\\\nâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\\\\n2. ê´€ì ì—ì„œ ì„¤ëª… ì‹œì‘',\n    'ê³¼í•™ì  ê´€ì ': 'ì´ ë‚´ìš©ì„ í•œ ê¸€ìë„ ë¹ ì§ì—†ì´ ë²ˆì—­í•´ì£¼ê³ , ê³¼í•™ì  ê´€ì ì—ì„œ ì´ ì˜ìƒì˜ í˜„ìƒì´ë‚˜ ë‚´ìš©ì„ ë¶„ì„í•´ì£¼ì„¸ìš”. ë¬¼ë¦¬í•™, í™”í•™, ìƒë¬¼í•™ì  ì›ë¦¬ë‚˜ ê³¼í•™ì  ê·¼ê±°ë¥¼ ë°”íƒ•ìœ¼ë¡œ ìƒì„¸íˆ ì„¤ëª…í•´ì£¼ì„¸ìš”.\\\\n\\\\nex) \\\\n1. í•œê¸€ë²ˆì—­\\\\n00:02-00:03 ã…£ ì´ ê¸°êµ¬ëŠ” ì •ë§ ë†€ëìŠµë‹ˆë‹¤.\\\\n00:03-00:06 ã…£ ë°–ì—ì„œ ë¶€í„° ì‹œì‘ë˜ëŠ” ì‚¬ìƒì´ˆìœ ì˜\\\\n.\\\\n.\\\\nâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\\\\n2. ê´€ì ì—ì„œ ì„¤ëª… ì‹œì‘',\n    'ë°”ì´ëŸ´ ì‡¼ì¸ ìš©': 'ì´ ë‚´ìš©ì„ í•œ ê¸€ìë„ ë¹ ì§ì—†ì´ ë²ˆì—­í•´ì£¼ê³ , ë°”ì´ëŸ´ ì‡¼ì¸  ì œì‘ ê´€ì ì—ì„œ ë¶„ì„í•´ì£¼ì„¸ìš”. ì™œ ì´ ì˜ìƒì´ ìœ íŠœë¸Œì— ë°”ì´ëŸ´ë˜ê³  ì‚¬ëŒë“¤ì´ ì¢‹ì•„ìš”ë¥¼ ëˆ„ë¥´ê±°ë‚˜ ëŒ“ê¸€ì´ ë§ì´ ë‹¬ë¦¬ëŠ”ì§€ ë¶„ì„í•´ì£¼ì„¸ìš”. ë˜í•œ ê°€ì¥ í¥ë¯¸ë¡œìš´ ìˆœê°„, ê°ì •ì  í•˜ì´ë¼ì´íŠ¸, ì§§ì€ ì˜ìƒì— ì í•©í•œ í´ë¦½ í¬ì¸íŠ¸ë¥¼ ì°¾ì•„ì£¼ì„¸ìš”.\\\\n\\\\nex) \\\\n1. í•œê¸€ë²ˆì—­\\\\n00:02-00:03 ã…£ ì´ ê¸°êµ¬ëŠ” ì •ë§ ë†€ëìŠµë‹ˆë‹¤.\\\\n00:03-00:06 ã…£ ë°–ì—ì„œ ë¶€í„° ì‹œì‘ë˜ëŠ” ì‚¬ìƒì´ˆìœ ì˜\\\\n.\\\\n.\\\\nâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\\\\n2. ê´€ì ì—ì„œ ì„¤ëª… ì‹œì‘',\n    'ì»¤ìŠ¤í…€': ''\n  };\n\n  const analysisTypes2 = {\n    'ê¸°ë³¸': 'ì›ë³¸ ìŠ¤í¬ë¦½íŠ¸ì— ë‚˜ì˜¨ ëŒ€ì‚¬ì™€ ë¹„ìŠ·í•œ ìŠ¤íƒ€ì¼ê³¼ ëŠë‚Œ, ì‚¬ëŒì˜ ê°ì •ê³¼ ë¬¸ë§¥ì„ ê·¸ëŒ€ë¡œ ìœ ì§€í•˜ë˜, ë” í›„í‚¹ë˜ê³  ì‹œì²­ ì§€ì†ì‹œê°„ì„ ìœ ì§€ì‹œí‚¬ ìˆ˜ ìˆëŠ” ê¸´ì¥ê°ê³¼ ì •ë³´ë ¥, ì ì ˆí•œ ìœ ë¨¸ê¹Œì§€ ì„ì–´ì„œ ëŒ€ì‚¬ë¥¼ ë§Œë“¤ì–´ì£¼ì„¸ìš”. ëŒ€ì‚¬ì˜ ì–‘ì€ ì›ë³¸ ìŠ¤í¬ë¦½íŠ¸ì™€ ë™ì¼í•©ë‹ˆë‹¤.\\\\n\\\\nex)\\\\n-ì›ë³¸ ìŠ¤í¬ë¦½íŠ¸ ê¸€ììˆ˜ : **. // ìˆ«ìë§Œ ê¸°ì….\\\\n-ì›ë³¸ ìŠ¤í¬ë¦½íŠ¸ ë¬¸ì¥ìˆ˜ : **.\\\\n-ìƒì„±ëœ ê¸°ë³¸ ìŠ¤í¬ë¦½íŠ¸ ê¸€ììˆ˜ : **.\\\\n-ìƒì„±ëœ ê¸°ë³¸ ìŠ¤í¬ë¦½íŠ¸ ë¬¸ì¥ìˆ˜ : **.\\\\n\\\"ëŒ€ì‚¬ë§Œ ì“°ì„¸ìš”.\\\"',\n    '3ì´ˆ í›„í‚¹': 'ì›ë³¸ ìŠ¤í¬ë¦½íŠ¸ì— ë‚˜ì˜¨ ëŒ€ì‚¬ì˜ ìŠ¤íƒ€ì¼ê³¼ ë¬¸ë§¥ì„ ìœ ì§€í•˜ë˜, ëŒ€ì‚¬ ì• 3ì´ˆì—ì„œ ì‚¬ëŒë“¤ì„ ëŒì–´ ë‹¹ê¸°ëŠ” ê°•ë ¥í•œ í›„í‚¹ë¬¸êµ¬ê°€ í•„ìš”í•˜ê³ , ì ì ˆí•œ ì¬ì¹˜ì™€ ê¸´ì¥ê°, ì •ë³´ë ¥ì„ ê°„ë‹¨í•˜ê³  ì¹œì ˆí•˜ê²Œ ì•Œë ¤ì£¼ì„¸ìš”. ë§ˆì§€ë§‰ìœ¼ë¡œ ì´ ë‚´ìš©ì„ ë³¸ ì‚¬ëŒë“¤ì´ í† ë¡ ì„ í•  ìˆ˜ ìˆë„ë¡ ì˜ê²¬ì„ ë¬»ëŠ” ê°•ë ¥í•œ í•œë§ˆë””ê°€ í•„ìš”í•©ë‹ˆë‹¤. ëŒ€ì‚¬ì˜ ì–‘ì€ ì›ë³¸ ìŠ¤í¬ë¦½íŠ¸ì™€ ë™ì¼í•©ë‹ˆë‹¤.\\\\n\\\\nex)\\\\n-ì›ë³¸ ìŠ¤í¬ë¦½íŠ¸ ê¸€ììˆ˜ : **. // ìˆ«ìë§Œ ê¸°ì….\\\\n-ì›ë³¸ ìŠ¤í¬ë¦½íŠ¸ ë¬¸ì¥ìˆ˜ : **.\\\\n-ìƒì„±ëœ ê¸°ë³¸ ìŠ¤í¬ë¦½íŠ¸ ê¸€ììˆ˜ : **.\\\\n-ìƒì„±ëœ ê¸°ë³¸ ìŠ¤í¬ë¦½íŠ¸ ë¬¸ì¥ìˆ˜ : **.\\\\n\\\"ëŒ€ì‚¬ë§Œ ì“°ì„¸ìš”.\\\"',\n    'ì •ë³´ë ¥ ë§Œë ™': 'ì›ë³¸ ìŠ¤í¬ë¦½íŠ¸ì— ë‚˜ì˜¨ ëŒ€ì‚¬ì˜ ìŠ¤íƒ€ì¼ê³¼ ë¬¸ë§¥ì„ ìœ ì§€í•˜ë˜, ê°•ë ¥í•œ 3ì´ˆ í›„í‚¹ë¬¸êµ¬ê°€ í•„ìš”í•©ë‹ˆë‹¤. ì‚¬ëŒë“¤ì´ ì–´? ë­ì§€? í•˜ê³  ì‡¼ì¸ ë¥¼ ë©ˆì¶œìˆ˜ ìˆë„ë¡ ê°•ë ¥í•˜ê²Œ ì‚¬ëŒë“¤ì„ ë¶™ì¡ìœ¼ì„¸ìš”. ì •ë³´ ì§€ì‹ì„ í† ëŒ€ë¡œ ì´ ë‚´ìš©ì„ ë³¸ ì‚¬ëŒë“¤ì´ ì´í•´í•˜ê¸° ì‰½ê³  ì •ë³´ë¥¼ ì–»ì—ˆë‹¤ëŠ” ë§Œì¡±ê°ì„ ì£¼ì–´ì•¼í•©ë‹ˆë‹¤. ì ì ˆí•œ ì¬ì¹˜ì™€ ìœ ë¨¸ë¥¼ ê³ë“¤ì´ê³  ì‹ ë¢°ì„± ë†’ì€ ê·¼ê±°ë¥¼ ë°”íƒ•ìœ¼ë¡œ ìƒì„¸íˆ ì¨ì£¼ì„¸ìš”. ë°˜ë“œì‹œ ì˜ë¯¸ìˆëŠ” ì •ë³´ë¥¼ ê°€ë“ ë„£ì–´ì„œ ì •ë³´ë ¥ ë†’ì€ ëŒ€ì‚¬ë¥¼ ë§Œë“œì„¸ìš”. ê°€ì¥ ì¤‘ìš”í•©ë‹ˆë‹¤. ëŒ€ì‚¬ì˜ ì–‘ì€ ì›ë³¸ ìŠ¤í¬ë¦½íŠ¸ì™€ ë™ì¼í•©ë‹ˆë‹¤.\\\\n\\\\nex)\\\\n-ì›ë³¸ ìŠ¤í¬ë¦½íŠ¸ ê¸€ììˆ˜ : **. // ìˆ«ìë§Œ ê¸°ì….\\\\n-ì›ë³¸ ìŠ¤í¬ë¦½íŠ¸ ë¬¸ì¥ìˆ˜ : **.\\\\n-ìƒì„±ëœ ê¸°ë³¸ ìŠ¤í¬ë¦½íŠ¸ ê¸€ììˆ˜ : **.\\\\n-ìƒì„±ëœ ê¸°ë³¸ ìŠ¤í¬ë¦½íŠ¸ ë¬¸ì¥ìˆ˜ : **.\\\\n\\\"ëŒ€ì‚¬ë§Œ ì“°ì„¸ìš”.\\\"',\n    'ë°”ì´ëŸ´ ëŒ€ì‚¬': 'ì´ ì •ë³´ë¥¼ íƒ€ê¹ƒì€ ëˆ„êµ¬ì¸ì§€, ì´ ë‚´ìš©ì„ ê¶ê¸ˆí•˜ê±°ë‚˜ ì¢‹ì•„í•˜ëŠ”ì‚¬ëŒ, ëŒ“ê¸€ì“°ëŠ” ì‚¬ëŒì„ ìœ„í•œ ëŒ€ì‚¬ë¥¼ ë§Œë“œì„¸ìš”. ì£¼ì–´ì§„ ì •ë³´ì¤‘ì— \\'í¥ë¯¸ë¡œìš´ ìˆœê°„\\', \\'ê°ì •ì  í•˜ì´ë¼ì´íŠ¸\\', \\'ë§¤ë ¥ì ì¸ í´ë¦½í¬ì¸íŠ¸\\'ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì •ë§ ë‹¹ì‹ ì—ê²Œ í•„ìš”í•œ ì´ì•¼ê¸°ë¼ëŠ” ê²ƒì„ í•œë§ˆë””ë¡œ í›„í‚¹í•˜ì„¸ìš”. ì´ ë‚´ìš©ì„ ë³¸ ì‚¬ëŒë“¤ì´ ëŠ¥ë™ì ìœ¼ë¡œ ëŒ“ê¸€ì„ ë‹¬ê³ , ê³µìœ í•  ë§Œí•œ ë‚´ìš©ìœ¼ë¡œ ì‘ì„±í•˜ê³  ì‹œì²­ìë“¤ì˜ ì˜ê²¬ëŒ€ë¦½ì„ ìœ„í•´ ë§ˆì§€ë§‰ í•œ,ë‘ë§ˆë””ë¥¼ ì ì–´ ëŒ“ê¸€ì„ ìœ ë„í•˜ì„¸ìš”. ë‹¨ \\'ëŒ“ê¸€ì¨ì£¼ì„¸ìš”\\'ê°™ì€ ì§ì ‘ì ì¸ê²ƒì´ ì•„ë‹Œ, ì‚¬ëŒë“¤ì´ ì´ ë‚´ìš©ì„ ë³´ê³  ëŒ“ê¸€ì„ ì ê³ ì‹¶ë„ë¡ ë§Œë“œëŠ” ê²ƒì´ ë‹¹ì‹ ì´ ì ì€ ì´ ìŠ¤í¬ë¦½íŠ¸ì˜ ì§„ì •í•œ ëª©ì ì…ë‹ˆë‹¤. í¥ë¯¸ë¡­ê³ , ë§¤ë ¥ì ì´ê³ , ê°•ë ¥í•œ í›„í‚¹ê³¼ ì‹ ë¢°ê¸°ë°˜ì˜ ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ëŒ€ì‚¬ë¥¼ ì“°ì„¸ìš”. ëŒ€ì‚¬ì˜ ì–‘ì€ ì›ë³¸ ìŠ¤í¬ë¦½íŠ¸ì™€ ë™ì¼í•©ë‹ˆë‹¤.\\\\n\\\\nex)\\\\n-ì›ë³¸ ìŠ¤í¬ë¦½íŠ¸ ê¸€ììˆ˜ : **. // ìˆ«ìë§Œ ê¸°ì….\\\\n-ì›ë³¸ ìŠ¤í¬ë¦½íŠ¸ ë¬¸ì¥ìˆ˜ : **.\\\\n-ìƒì„±ëœ ê¸°ë³¸ ìŠ¤í¬ë¦½íŠ¸ ê¸€ììˆ˜ : **.\\\\n-ìƒì„±ëœ ê¸°ë³¸ ìŠ¤í¬ë¦½íŠ¸ ë¬¸ì¥ìˆ˜ : **.\\\\n\\\"ëŒ€ì‚¬ë§Œ ì“°ì„¸ìš”.\\\"',\n    'ì»¤ìŠ¤í…€': ''\n  };\n\n  const analysisTypes3 = {\n    'ê¸°ë³¸': 'ì›ë³¸ ìŠ¤í¬ë¦½íŠ¸ì™€ 4ë²ˆì§¸ ì¹¼ëŸ¼ ê²°ê³¼ë¥¼ ì°¸ê³ í•´ì„œ ìƒˆë¡œìš´ ëŒ€ì‚¬ë¥¼ ë§Œë“¤ì–´ì£¼ì„¸ìš”. ëŒ€ì‚¬ì˜ ì–‘ì€ ì›ë³¸ ìŠ¤í¬ë¦½íŠ¸ì™€ ë™ì¼í•©ë‹ˆë‹¤.\\\\n\\\\nex)\\\\n-ì›ë³¸ ìŠ¤í¬ë¦½íŠ¸ ê¸€ììˆ˜ : **. // ìˆ«ìë§Œ ê¸°ì….\\\\n-ì›ë³¸ ìŠ¤í¬ë¦½íŠ¸ ë¬¸ì¥ìˆ˜ : **.\\\\n-ìƒì„±ëœ ê¸°ë³¸ ìŠ¤í¬ë¦½íŠ¸ ê¸€ììˆ˜ : **.\\\\n-ìƒì„±ëœ ê¸°ë³¸ ìŠ¤í¬ë¦½íŠ¸ ë¬¸ì¥ìˆ˜ : **.\\\\n\\\"ëŒ€ì‚¬ë§Œ ì“°ì„¸ìš”.\\\"',\n    'ê°ì •ì  ëª°ì…': 'ì›ë³¸ ìŠ¤í¬ë¦½íŠ¸ì™€ 4ë²ˆì§¸ ì¹¼ëŸ¼ ê²°ê³¼ë¥¼ ì°¸ê³ í•´ì„œ ê°ì •ì  ëª°ì…ë„ê°€ ê·¹ëŒ€í™”ë˜ëŠ” ëŒ€ì‚¬ë¥¼ ë§Œë“¤ì–´ì£¼ì„¸ìš”. ì‹œì²­ìë“¤ì´ ê°ì •ì ìœ¼ë¡œ ê¹Šì´ ë¹ ì ¸ë“¤ ìˆ˜ ìˆë„ë¡ í•´ì£¼ì„¸ìš”. ëŒ€ì‚¬ì˜ ì–‘ì€ ì›ë³¸ ìŠ¤í¬ë¦½íŠ¸ì™€ ë™ì¼í•©ë‹ˆë‹¤.\\\\n\\\\nex)\\\\n-ì›ë³¸ ìŠ¤í¬ë¦½íŠ¸ ê¸€ììˆ˜ : **. // ìˆ«ìë§Œ ê¸°ì….\\\\n-ì›ë³¸ ìŠ¤í¬ë¦½íŠ¸ ë¬¸ì¥ìˆ˜ : **.\\\\n-ìƒì„±ëœ ê¸°ë³¸ ìŠ¤í¬ë¦½íŠ¸ ê¸€ììˆ˜ : **.\\\\n-ìƒì„±ëœ ê¸°ë³¸ ìŠ¤í¬ë¦½íŠ¸ ë¬¸ì¥ìˆ˜ : **.\\\\n\\\"ëŒ€ì‚¬ë§Œ ì“°ì„¸ìš”.\\\"',\n    'ì™„ì „ ëª°ì…': 'ì›ë³¸ ìŠ¤í¬ë¦½íŠ¸ì™€ 4ë²ˆì§¸ ì¹¼ëŸ¼ ê²°ê³¼ë¥¼ ì°¸ê³ í•´ì„œ ì™„ì „í•œ ëª°ì…ì´ ê°€ëŠ¥í•œ ìµœê³ ì˜ ëŒ€ì‚¬ë¥¼ ë§Œë“¤ì–´ì£¼ì„¸ìš”. ì‹œì²­ìë“¤ì´ í™”ë©´ì—ì„œ ëˆˆì„ ë–¼ì§€ ëª»í•˜ë„ë¡ í•´ì£¼ì„¸ìš”. ëŒ€ì‚¬ì˜ ì–‘ì€ ì›ë³¸ ìŠ¤í¬ë¦½íŠ¸ì™€ ë™ì¼í•©ë‹ˆë‹¤.\\\\n\\\\nex)\\\\n-ì›ë³¸ ìŠ¤í¬ë¦½íŠ¸ ê¸€ììˆ˜ : **. // ìˆ«ìë§Œ ê¸°ì….\\\\n-ì›ë³¸ ìŠ¤í¬ë¦½íŠ¸ ë¬¸ì¥ìˆ˜ : **.\\\\n-ìƒì„±ëœ ê¸°ë³¸ ìŠ¤í¬ë¦½íŠ¸ ê¸€ììˆ˜ : **.\\\\n-ìƒì„±ëœ ê¸°ë³¸ ìŠ¤í¬ë¦½íŠ¸ ë¬¸ì¥ìˆ˜ : **.\\\\n\\\"ëŒ€ì‚¬ë§Œ ì“°ì„¸ìš”.\\\"',\n    'ìŠ¤í† ë¦¬í…”ë§': 'ì›ë³¸ ìŠ¤í¬ë¦½íŠ¸ì™€ 4ë²ˆì§¸ ì¹¼ëŸ¼ ê²°ê³¼ë¥¼ ì°¸ê³ í•´ì„œ ìŠ¤í† ë¦¬í…”ë§ì´ ê°•í™”ëœ ëŒ€ì‚¬ë¥¼ ë§Œë“¤ì–´ì£¼ì„¸ìš”. ì´ì•¼ê¸°ì˜ íë¦„ê³¼ êµ¬ì„±ì´ íƒì›”í•˜ë„ë¡ í•´ì£¼ì„¸ìš”. ëŒ€ì‚¬ì˜ ì–‘ì€ ì›ë³¸ ìŠ¤í¬ë¦½íŠ¸ì™€ ë™ì¼í•©ë‹ˆë‹¤.\\\\n\\\\nex)\\\\n-ì›ë³¸ ìŠ¤í¬ë¦½íŠ¸ ê¸€ììˆ˜ : **. // ìˆ«ìë§Œ ê¸°ì….\\\\n-ì›ë³¸ ìŠ¤í¬ë¦½íŠ¸ ë¬¸ì¥ìˆ˜ : **.\\\\n-ìƒì„±ëœ ê¸°ë³¸ ìŠ¤í¬ë¦½íŠ¸ ê¸€ììˆ˜ : **.\\\\n-ìƒì„±ëœ ê¸°ë³¸ ìŠ¤í¬ë¦½íŠ¸ ë¬¸ì¥ìˆ˜ : **.\\\\n\\\"ëŒ€ì‚¬ë§Œ ì“°ì„¸ìš”.\\\"',\n    'ì»¤ìŠ¤í…€': ''\n  };\n\n  const handleAnalyzeContent = async (type: string) => {\n    if (!timecodeList || timecodeList.length === 0) {\n      alert('ë¨¼ì € ì˜ìƒì„ ë¶„ì„í•´ì£¼ì„¸ìš”. (A/V ìº¡ì…˜, ë‹¨ë½, ì£¼ìš” ìˆœê°„ ë“±ì˜ ë²„íŠ¼ì„ ëˆŒëŸ¬ ìƒì„±ëœ ë‚´ìš©ì´ í•„ìš”í•©ë‹ˆë‹¤)');\n      return;\n    }\n\n    if (!apiKey.trim()) {\n      alert('Gemini API í‚¤ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');\n      return;\n    }\n\n    if (type === 'ì»¤ìŠ¤í…€' && !customAnalysisPrompt.trim()) {\n      alert('ì»¤ìŠ¤í…€ ë¶„ì„ì„ ìœ„í•œ í”„ë¡¬í”„íŠ¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');\n      return;\n    }\n\n    setIsLoadingAnalysis(true);\n    setSelectedAnalysisType(type);\n    \n    const allText = timecodeList.map(item => item.text).join('\\n');\n    const languageMap = {\n      'í•œêµ­ì–´': 'Korean',\n      'ì¼ë³¸ì–´': 'Japanese', \n      'ì˜ì–´': 'English'\n    };\n    \n    const basePrompt = `ë‹¤ìŒì€ YouTube ì˜ìƒì—ì„œ ì¶”ì¶œí•œ ë‚´ìš©ì…ë‹ˆë‹¤:\n\n${allText}\n\nìš”êµ¬ì‚¬í•­:\n- ${selectedLanguage}ë¡œë§Œ ë‹µë³€í•´ì£¼ì„¸ìš”`;\n\n    const specificPrompt = type === 'ì»¤ìŠ¤í…€' ? customAnalysisPrompt : analysisTypes[type];\n    const analysisPrompt = `${basePrompt}\n- ${specificPrompt}`;\n\n    try {\n      const response = await generateContent(\n        analysisPrompt,\n        [],\n        `https://www.youtube.com/watch?v=${youtubeVideoId}`,\n        apiKey,\n      );\n\n      console.log('ë¶„ì„ ì‘ë‹µ:', response);\n      const analysisText = response.candidates?.[0]?.content?.parts?.[0]?.text || 'ë¶„ì„ ê²°ê³¼ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.';\n      setAnalysisResult(analysisText);\n      \n    } catch (error) {\n      console.error('ë¶„ì„ ì—ëŸ¬:', error);\n      alert('ë¶„ì„ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');\n    } finally {\n      setIsLoadingAnalysis(false);\n    }\n  };\n\n  const handleAnalyzeContent2 = async (type: string) => {\n    // ê¸°ì¡´ ë¶„ì„ ê²°ê³¼ ë˜ëŠ” íƒ€ì„ì½”ë“œ ê²°ê³¼ í™•ì¸\n    const hasOriginalScript = analysisResult || (timecodeList && timecodeList.length > 0);\n    \n    if (!hasOriginalScript) {\n      alert('ë¨¼ì € 3ë²ˆì§¸ ì¹¼ëŸ¼ì—ì„œ ë¶„ì„ì„ ì™„ë£Œí•˜ê±°ë‚˜, 2ë²ˆì§¸ ì¹¼ëŸ¼ì—ì„œ Generateë¥¼ ì‹¤í–‰í•´ì£¼ì„¸ìš”. (ì›ë³¸ ìŠ¤í¬ë¦½íŠ¸ê°€ í•„ìš”í•©ë‹ˆë‹¤)');\n      return;\n    }\n\n    if (!apiKey.trim()) {\n      alert('Gemini API í‚¤ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');\n      return;\n    }\n\n    if (type === 'ì»¤ìŠ¤í…€' && !customAnalysisPrompt2.trim()) {\n      alert('ì»¤ìŠ¤í…€ ë¶„ì„ì„ ìœ„í•œ í”„ë¡¬í”„íŠ¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');\n      return;\n    }\n\n    setIsLoadingScript(true);\n    setSelectedAnalysisType2(type);\n    \n    // 3ë²ˆì§¸ ì¹¼ëŸ¼ì˜ ë¶„ì„ ê²°ê³¼ ì „ì²´ë§Œ ì‚¬ìš©\n    const referenceContent = analysisResult;\n    \n    const basePrompt = `ë‹¤ìŒ ë‚´ìš©ì„ ì°¸ê³ í•˜ì„¸ìš”:\n\n${referenceContent}\n\nìš”êµ¬ì‚¬í•­:\n- ${selectedLanguage2}ë¡œë§Œ ë‹µë³€í•´ì£¼ì„¸ìš”\n- í•¨ìˆ˜ í˜¸ì¶œì´ë‚˜ ì½”ë“œ í˜•ì‹ì´ ì•„ë‹Œ ì¼ë°˜ í…ìŠ¤íŠ¸ë¡œë§Œ ë‹µë³€í•´ì£¼ì„¸ìš”\n- ëŒ€ì‚¬ë§Œ ì‘ì„±í•´ì£¼ì„¸ìš”`;\n\n    const specificPrompt = type === 'ì»¤ìŠ¤í…€' ? customAnalysisPrompt2 : analysisTypes2[type];\n    const analysisPrompt = `${basePrompt}\n- ${specificPrompt}`;\n\n    try {\n      const response = await generateContent(\n        analysisPrompt,\n        [],\n        `https://www.youtube.com/watch?v=${youtubeVideoId}`,\n        apiKey,\n      );\n\n      console.log('ë¶„ì„ ì‘ë‹µ2:', response);\n      const analysisText = response.candidates?.[0]?.content?.parts?.[0]?.text || 'ë¶„ì„ ê²°ê³¼ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.';\n      setAnalysisResult2(analysisText);\n      \n    } catch (error) {\n      console.error('ë¶„ì„ ì—ëŸ¬2:', error);\n      alert('ë¶„ì„ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');\n    } finally {\n      setIsLoadingScript(false);\n    }\n  };\n\n  // í‚¤ì›Œë“œ ì¶”ì¶œ í•¨ìˆ˜\n  const handleKeywordExtraction = async () => {\n    // 3ë²ˆì§¸ ì¹¼ëŸ¼ì˜ ë¶„ì„ ê²°ê³¼ í™•ì¸\n    if (!analysisResult && (!timecodeList || timecodeList.length === 0)) {\n      alert('ë¨¼ì € 3ë²ˆì§¸ ì¹¼ëŸ¼ì—ì„œ ì˜ìƒ ë¶„ì„ì„ ì‹¤í–‰í•´ì£¼ì„¸ìš”.');\n      return;\n    }\n\n    if (!apiKey.trim()) {\n      alert('Gemini API í‚¤ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');\n      return;\n    }\n\n    setIsExtractingKeywords(true);\n    \n    // 3ë²ˆì§¸ ì¹¼ëŸ¼ì˜ ë¶„ì„ ê²°ê³¼ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í‚¤ì›Œë“œ ì¶”ì¶œ\n    const analysisContent = analysisResult || (timecodeList ? timecodeList.map(item => item.text).join('\\n') : '');\n    \n    const keywordPrompt = `ë‹¤ìŒ ì˜ìƒ ë¶„ì„ ê²°ê³¼ë¥¼ ë°”íƒ•ìœ¼ë¡œ í•µì‹¬ í‚¤ì›Œë“œë“¤ì„ ì¤‘ìš”ë„ ìˆœìœ¼ë¡œ ì¶”ì¶œí•´ì£¼ì„¸ìš”:\n\n${analysisContent}\n\nìš”êµ¬ì‚¬í•­:\n- ë¶„ì„ ê²°ê³¼ì—ì„œ ì–¸ê¸‰ëœ êµ¬ì²´ì ì¸ ìš©ì–´/ëª…ì¹­ì„ ìš°ì„ ì ìœ¼ë¡œ ì¶”ì¶œí•˜ì„¸ìš”\n- ì „ë¬¸ ìš©ì–´, ê³ ìœ ëª…ì‚¬, íŠ¹ì • ë¶„ì•¼/ì¹´í…Œê³ ë¦¬ ëª…ì¹­ì„ ë†“ì¹˜ì§€ ë§ˆì„¸ìš”\n- ì˜ˆì‹œ: \"ìœ™í¬ì¼\", \"ê¸€ë¼ì´ë”©\", \"í•­ê³µì—­í•™\" ë“±ì˜ êµ¬ì²´ì  ìš©ì–´\n- ì¼ë°˜ì ì´ê³  ëª¨í˜¸í•œ ë‹¨ì–´ë³´ë‹¤ëŠ” êµ¬ì²´ì ì´ê³  íŠ¹ì •í•œ ìš©ì–´ë¥¼ ìš°ì„ í•˜ì„¸ìš”\n- ì‚¬ëŒë“¤ì´ ì´ ì£¼ì œë¥¼ ê²€ìƒ‰í•  ë•Œ ì‚¬ìš©í•  ì •í™•í•œ ìš©ì–´ë“¤ë¡œ êµ¬ì„±í•˜ì„¸ìš”\n- ê°€ì¥ í•µì‹¬ì´ ë˜ëŠ” ì£¼ì œì–´ë¥¼ ë§¨ ìœ„ì—, ê·¸ ë‹¤ìŒ ê´€ë ¨ ìš©ì–´ ìˆœìœ¼ë¡œ ë°°ì¹˜í•˜ì„¸ìš”\n- ê° í‚¤ì›Œë“œë¥¼ ìƒˆ ì¤„ì— í•˜ë‚˜ì”© ë‚˜ì—´í•´ì£¼ì„¸ìš” (ì¤„ë°”ê¿ˆìœ¼ë¡œ êµ¬ë¶„)\n- í•¨ìˆ˜ í˜¸ì¶œì´ë‚˜ ì½”ë“œ í˜•ì‹ì´ ì•„ë‹Œ ì¼ë°˜ í…ìŠ¤íŠ¸ë¡œë§Œ ë‹µë³€í•´ì£¼ì„¸ìš”\n- í•œêµ­ì–´ë¡œ ë‹µë³€í•´ì£¼ì„¸ìš”\n- 5-10ê°œ ì •ë„ì˜ í‚¤ì›Œë“œë¡œ ì œí•œí•´ì£¼ì„¸ìš”\n- ì¢‹ì€ ì˜ˆ: \"ìœ™í¬ì¼\", \"ê¸€ë¼ì´ë”©\", \"í•­ê³µì—­í•™\" vs ë‚˜ìœ ì˜ˆ: \"ìœ™\", \"ë¹„í–‰\", \"ë°”ëŒ\"`;\n\n    try {\n      const response = await generateContent(\n        keywordPrompt,\n        [],\n        `https://www.youtube.com/watch?v=${youtubeVideoId}`,\n        apiKey,\n      );\n\n      console.log('í‚¤ì›Œë“œ ì¶”ì¶œ ì‘ë‹µ:', response);\n      const keywordsText = response.candidates?.[0]?.content?.parts?.[0]?.text || 'í‚¤ì›Œë“œë¥¼ ì¶”ì¶œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.';\n      setExtractedKeywords(keywordsText);\n      \n    } catch (error) {\n      console.error('í‚¤ì›Œë“œ ì¶”ì¶œ ì—ëŸ¬:', error);\n      alert('í‚¤ì›Œë“œ ì¶”ì¶œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');\n    } finally {\n      setIsExtractingKeywords(false);\n    }\n  };\n\n  const handleAnalyzeContent3 = async (type: string) => {\n    // 4ë²ˆì§¸ ì¹¼ëŸ¼ì˜ ë¶„ì„ ê²°ê³¼ ë˜ëŠ” 3ë²ˆì§¸ ì¹¼ëŸ¼ ê²°ê³¼ í™•ì¸\n    const hasAnalysisResult = analysisResult2 || analysisResult || (timecodeList && timecodeList.length > 0);\n    \n    if (!hasAnalysisResult) {\n      alert('ë¨¼ì € 4ë²ˆì§¸ ì¹¼ëŸ¼ì—ì„œ ë¶„ì„ì„ ì™„ë£Œí•˜ê±°ë‚˜, 3ë²ˆì§¸ ì¹¼ëŸ¼ì—ì„œ ë¶„ì„ì„ ì‹¤í–‰í•´ì£¼ì„¸ìš”.');\n      return;\n    }\n\n    if (!apiKey.trim()) {\n      alert('Gemini API í‚¤ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');\n      return;\n    }\n\n    if (type === 'ì»¤ìŠ¤í…€' && !customAnalysisPrompt3.trim()) {\n      alert('ì»¤ìŠ¤í…€ ë¶„ì„ì„ ìœ„í•œ í”„ë¡¬í”„íŠ¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');\n      return;\n    }\n\n    setIsLoading(true);  // ì´ í•¨ìˆ˜ëŠ” ìŒì„± ê´€ë ¨ì´ë¯€ë¡œ ì¼ë‹¨ ê¸°ì¡´ ìƒíƒœ ìœ ì§€\n    setSelectedAnalysisType3(type);\n    \n    // 4ë²ˆì§¸ ì¹¼ëŸ¼ ê²°ê³¼ê°€ ìˆìœ¼ë©´ ê·¸ê²ƒê³¼ ì›ë³¸ íƒ€ì„ì½”ë“œë¥¼ ëª¨ë‘ ì‚¬ìš©\n    const referenceContent = analysisResult2 ? \n      `4ë²ˆì§¸ ì¹¼ëŸ¼ ë¶„ì„ ê²°ê³¼:\n${analysisResult2}\n\nì›ë³¸ íƒ€ì„ì½”ë“œ:\n${timecodeList.map(item => `${item.time}: ${item.text}`).join('\\n')}` :\n      `ì›ë³¸ íƒ€ì„ì½”ë“œ:\n${timecodeList.map(item => `${item.time}: ${item.text}`).join('\\n')}`;\n    \n    const basePrompt = `ë‹¤ìŒ ë‚´ìš©ì„ ì°¸ê³ í•˜ì„¸ìš”:\n\n${referenceContent}\n\nìš”êµ¬ì‚¬í•­:\n- ${selectedLanguage3}ë¡œë§Œ ë‹µë³€í•´ì£¼ì„¸ìš”\n- í•¨ìˆ˜ í˜¸ì¶œì´ë‚˜ ì½”ë“œ í˜•ì‹ì´ ì•„ë‹Œ ì¼ë°˜ í…ìŠ¤íŠ¸ë¡œë§Œ ë‹µë³€í•´ì£¼ì„¸ìš”\n- ëŒ€ì‚¬ë§Œ ì‘ì„±í•´ì£¼ì„¸ìš”`;\n\n    const specificPrompt = type === 'ì»¤ìŠ¤í…€' ? customAnalysisPrompt3 : analysisTypes3[type];\n    const analysisPrompt = `${basePrompt}\n- ${specificPrompt}`;\n\n    try {\n      const response = await generateContent(\n        analysisPrompt,\n        [],\n        `https://www.youtube.com/watch?v=${youtubeVideoId}`,\n        apiKey,\n      );\n\n      console.log('ë¶„ì„ ì‘ë‹µ3:', response);\n      const analysisText = response.candidates?.[0]?.content?.parts?.[0]?.text || 'ë¶„ì„ ê²°ê³¼ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.';\n      setAnalysisResult3(analysisText);\n      \n    } catch (error) {\n      console.error('ë¶„ì„ ì—ëŸ¬3:', error);\n      alert('ë¶„ì„ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <main className={c(theme)}>\n      <div className=\"url-input-section\">\n        <form onSubmit={handleLoadVideo} className=\"url-input-form\">\n          <input\n            type=\"text\"\n            placeholder=\"Enter YouTube URL...\"\n            value={youtubeUrlInput}\n            onChange={(e) => setYoutubeUrlInput(e.target.value)}\n            className=\"url-input\"\n            required\n          />\n          <button type=\"submit\" className=\"load-button\">\n            Load Video\n          </button>\n        </form>\n      </div>\n\n\n      <div className=\"four-column-layout\">\n        <div>\n          <div style={{ fontSize: '18px', fontWeight: 'bold', color: '#666', marginBottom: '8px', textAlign: 'left' }}>1</div>\n          <div className=\"video-column\" ref={videoColumnRef}>\n            <VideoPlayer\n              videoId={youtubeVideoId}\n              requestedTimecode={requestedTimecode}\n              timecodeList={timecodeList}\n              jumpToTimecode={setRequestedTimecode}\n              onLoadVideo={handleLoadVideo}\n              youtubeUrlInput={youtubeUrlInput}\n              setYoutubeUrlInput={setYoutubeUrlInput}\n            />\n          </div>\n        </div>\n\n        <div>\n          <div style={{ fontSize: '18px', fontWeight: 'bold', color: '#666', marginBottom: '8px', textAlign: 'left' }}>2</div>\n          <aside className=\"button-column\" ref={buttonColumnRef}>\n            <div className=\"modeSelector\">\n            <div>\n              <h2 style={{ fontWeight: 'bold', color: '#333', fontSize: '16px' }}>ë¹„ë””ì˜¤ ë¶„ì„í•˜ê¸°:</h2>\n              <div className=\"modeList\">\n                {Object.entries(modes).map(([mode, {emoji, prompt}]) => (\n                  <div key={mode}>\n                    <button\n                      className={c('button', {\n                        active: mode === selectedMode,\n                      })}\n                      onClick={() => {\n                        if (selectedMode === mode && expandedModes[mode]) {\n                          // ì´ë¯¸ ì„ íƒëœ ë²„íŠ¼ì„ ë‹¤ì‹œ ëˆ„ë¥´ë©´ ì•„ì½”ë””ì–¸ ë‹«ê¸°\n                          setExpandedModes(prev => ({\n                            ...prev,\n                            [mode]: false\n                          }));\n                        } else {\n                          // ìƒˆë¡œìš´ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì„ íƒ + ì•„ì½”ë””ì–¸ ì—´ê¸°\n                          setSelectedMode(mode);\n                          setExpandedModes(prev => ({\n                            ...prev,\n                            [mode]: true\n                          }));\n                          // 2ë²ˆì§¸ ì¹¼ëŸ¼ì„ ì¤‘ì•™ìœ¼ë¡œ ìŠ¤í¬ë¡¤\n                          setTimeout(() => scrollToColumn(buttonColumnRef), 100);\n                        }\n                      }}\n                      style={{width: '100%', display: 'flex', justifyContent: 'space-between', alignItems: 'center'}}>\n                      <span>\n                        <span className=\"emoji\">{emoji}</span> {mode}\n                      </span>\n                      <span \n                        style={{cursor: 'pointer', fontSize: '12px', transform: expandedModes[mode] ? 'rotate(180deg)' : 'rotate(0deg)', transition: 'transform 0.2s'}}>\n                        â–¼\n                      </span>\n                    </button>\n                    {expandedModes[mode] && (\n                      <div style={{\n                        background: 'var(--background)',\n                        border: '1px solid var(--border)',\n                        borderTop: 'none',\n                        borderRadius: '0 0 4px 4px',\n                        padding: '15px',\n                        fontSize: '13px',\n                        color: 'var(--text)',\n                        lineHeight: '1.4'\n                      }}>\n                        {mode === 'ì»¤ìŠ¤í…€' ? (\n                          <div>\n                            <textarea\n                              placeholder=\"ì»¤ìŠ¤í…€ ë¶„ì„ì„ ìœ„í•œ í”„ë¡¬í¬íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”...\"\n                              value={customPrompt}\n                              onChange={(e) => setCustomPrompt(e.target.value)}\n                              rows={4}\n                              style={{\n                                width: '100%',\n                                padding: '8px',\n                                border: '1px solid var(--border)',\n                                borderRadius: '4px',\n                                background: 'var(--highlight)',\n                                color: 'var(--text)',\n                                fontSize: '13px',\n                                fontFamily: 'inherit',\n                                resize: 'vertical'\n                              }}\n                            />\n                          </div>\n                        ) : (\n                          <div>\n                            <strong>Current Prompt:</strong><br/>\n                            {typeof prompt === 'function' ? 'Custom prompt with user input' : prompt}\n                          </div>\n                        )}\n                      </div>\n                    )}\n                  </div>\n                ))}\n              </div>\n            </div>\n            <div>\n              <div style={{marginBottom: '10px'}}>\n                <label htmlFor=\"apiKey2\" style={{display: 'block', marginBottom: '5px', fontWeight: 'bold', color: '#333', fontSize: '16px'}}>\n                  Gemini API Key:\n                </label>\n                <input\n                  id=\"apiKey2\"\n                  type=\"password\"\n                  placeholder=\"Enter your Gemini API key...\"\n                  value={apiKey}\n                  onChange={(e) => setApiKey(e.target.value)}\n                  style={{width: '100%', padding: '8px', border: '1px solid #ccc', borderRadius: '4px'}}\n                />\n              </div>\n              <button\n                className=\"button generateButton\"\n                onClick={() => onModeSelect(selectedMode)}\n                disabled={!apiKey.trim() || (isCustomMode && !customPrompt.trim())}>\n                â–¶ï¸ Generate\n              </button>\n              \n              {isLoadingGenerate && <LoadingMessage />}\n            </div>\n          </div>\n          <div className={c('tools', {inactive: !youtubeVideoId})}>\n              <section\n                className={c('output', {['mode' + activeMode]: activeMode})}\n                ref={scrollRef}>\n                {timecodeList && activeMode ? (\n                  activeMode === 'Table' ? (\n                    <table>\n                      <thead>\n                        <tr>\n                          <th>Time</th>\n                          <th>Description</th>\n                          <th>Objects</th>\n                        </tr>\n                      </thead>\n                      <tbody>\n                        {timecodeList.map(({time, text, objects}, i) => (\n                          <tr\n                            key={i}\n                            role=\"button\"\n                            onClick={() =>\n                              setRequestedTimecode(timeToSecs(time))\n                            }>\n                            <td>\n                              <time>{time}</time>\n                            </td>\n                            <td>{text}</td>\n                            <td>{objects.join(', ')}</td>\n                          </tr>\n                        ))}\n                      </tbody>\n                    </table>\n                  ) : (modes as any)[activeMode].isList ? (\n                    <ul>\n                      {timecodeList.map(({time, text}, i) => (\n                        <li key={i} className=\"outputItem\">\n                          <button\n                            onClick={() =>\n                              setRequestedTimecode(timeToSecs(time))\n                            }>\n                            <time>{time}</time>\n                            <p className=\"text\">{text}</p>\n                          </button>\n                        </li>\n                      ))}\n                    </ul>\n                  ) : (\n                    timecodeList.map(({time, text}, i) => (\n                      <>\n                        <span\n                          key={i}\n                          className=\"sentence\"\n                          role=\"button\"\n                          onClick={() =>\n                            setRequestedTimecode(timeToSecs(time))\n                          }>\n                          <time>{time}</time>\n                          <span>{text}</span>\n                        </span>{' '}\n                      </>\n                    ))\n                  )\n                ) : null}\n              </section>\n            </div>\n          </aside>\n        </div>\n\n        <div>\n          <div style={{ fontSize: '18px', fontWeight: 'bold', color: '#666', marginBottom: '8px', textAlign: 'left' }}>3</div>\n          <div className=\"white-column\" ref={whiteColumnRef}>\n            <div className=\"modeList\">\n              <div style={{ marginBottom: '15px', display: 'flex', alignItems: 'center', gap: '10px' }}>\n                <label style={{ fontWeight: 'bold', color: '#333', whiteSpace: 'nowrap', fontSize: '16px' }}>ë¶„ì„ ì–¸ì–´:</label>\n                <select\n                  value={selectedLanguage}\n                  onChange={(e) => setSelectedLanguage(e.target.value)}\n                  style={{\n                    padding: '8px 12px',\n                    border: '1px solid #ccc',\n                    borderRadius: '4px',\n                    fontSize: '14px',\n                    backgroundColor: 'white',\n                    color: '#333',\n                    flex: 1\n                  }}\n                >\n                  <option value=\"í•œêµ­ì–´\">í•œêµ­ì–´</option>\n                  <option value=\"ì¼ë³¸ì–´\">ì¼ë³¸ì–´</option>\n                  <option value=\"ì˜ì–´\">ì˜ì–´</option>\n                </select>\n              </div>\n\n              {Object.entries(analysisTypes).map(([type, prompt]) => (\n                <div key={type}>\n                  <button\n                    className={c('button', {\n                      active: expandedAnalysis === type,\n                    })}\n                    onClick={() => {\n                      if (expandedAnalysis === type) {\n                        // ì´ë¯¸ ì„ íƒëœ ë²„íŠ¼ì„ ë‹¤ì‹œ ëˆ„ë¥´ë©´ ì•„ì½”ë””ì–¸ ë‹«ê¸°\n                        setExpandedAnalysis('');\n                      } else {\n                        // ìƒˆë¡œìš´ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì„ íƒ + ì•„ì½”ë””ì–¸ ì—´ê¸°\n                        setExpandedAnalysis(type);\n                        // 3ë²ˆì§¸ ì¹¼ëŸ¼ì„ ì¤‘ì•™ìœ¼ë¡œ ìŠ¤í¬ë¡¤\n                        setTimeout(() => scrollToColumn(whiteColumnRef), 100);\n                      }\n                    }}\n                    style={{width: '100%', display: 'flex', justifyContent: 'space-between', alignItems: 'center'}}\n                  >\n                    <span>\n                      <span className=\"emoji\">{type === 'ì»¤ìŠ¤í…€' ? 'ğŸ”§' : type === 'ì—­ì‚¬ì  ê´€ì ' ? 'ğŸ›ï¸' : type === 'ê³¼í•™ì  ê´€ì ' ? 'ğŸ§ª' : type === 'ë°”ì´ëŸ´ ì‡¼ì¸ ìš©' ? 'ğŸ”¥' : 'ğŸ“'}</span> {type}\n                    </span>\n                    <span \n                      style={{cursor: 'pointer', fontSize: '12px', transform: expandedAnalysis === type ? 'rotate(180deg)' : 'rotate(0deg)', transition: 'transform 0.2s'}}\n                    >\n                      â–¼\n                    </span>\n                  </button>\n                  {expandedAnalysis === type && (\n                    <div style={{\n                      background: 'var(--background)',\n                      border: '1px solid var(--border)',\n                      borderTop: 'none',\n                      borderRadius: '0 0 4px 4px',\n                      padding: '15px',\n                      fontSize: '13px',\n                      color: 'var(--text)',\n                      lineHeight: '1.4'\n                    }}>\n                      {type === 'ì»¤ìŠ¤í…€' ? (\n                        <div>\n                          <textarea\n                            placeholder=\"ì»¤ìŠ¤í…€ ë¶„ì„ì„ ìœ„í•œ í”„ë¡¬í”„íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”...\"\n                            value={customAnalysisPrompt}\n                            onChange={(e) => setCustomAnalysisPrompt(e.target.value)}\n                            rows={4}\n                            style={{\n                              width: '100%',\n                              padding: '8px',\n                              border: '1px solid var(--border)',\n                              borderRadius: '4px',\n                              background: 'var(--highlight)',\n                              color: 'var(--text)',\n                              fontSize: '13px',\n                              fontFamily: 'inherit',\n                              resize: 'vertical'\n                            }}\n                          />\n                        </div>\n                      ) : (\n                        <div>\n                          <strong>í”„ë¡¬í”„íŠ¸:</strong><br/>\n                          <div style={{ whiteSpace: 'pre-wrap' }}>\n                            {prompt.replace(/\\\\n/g, '\\n')}\n                          </div>\n                        </div>\n                      )}\n                    </div>\n                  )}\n                </div>\n              ))}\n            </div>\n            \n            <div style={{ marginTop: '20px' }}>\n              <button\n                className=\"button generateButton\"\n                onClick={() => {\n                  if (expandedAnalysis) {\n                    handleAnalyzeContent(expandedAnalysis);\n                  } else {\n                    alert('ë¶„ì„ íƒ€ì…ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n                  }\n                }}\n                disabled={\n                  !apiKey.trim() || \n                  !expandedAnalysis ||\n                  (expandedAnalysis === 'ì»¤ìŠ¤í…€' && !customAnalysisPrompt.trim())\n                }>\n                ğŸ”¬ ë¶„ì„í•˜ê¸°\n              </button>\n              \n              {isLoadingAnalysis && <LoadingMessage />}\n            </div>\n          </div>\n          \n          {analysisResult && (\n            <div style={{\n              marginTop: '20px',\n              padding: '15px',\n              background: '#f8f9fa',\n              border: '1px solid #dee2e6',\n              borderRadius: '6px',\n              color: '#333'\n            }}>\n              <h4 style={{ marginBottom: '10px', color: '#333' }}>\n                ë¶„ì„ ê²°ê³¼ ({selectedAnalysisType}):\n              </h4>\n              <div style={{ \n                whiteSpace: 'pre-wrap', \n                lineHeight: '1.6',\n                fontSize: '14px',\n                color: '#333'\n              }}>\n                {analysisResult.replace(/\\\\n/g, '\\n')}\n              </div>\n            </div>\n          )}\n          </div>\n        </div>\n        <div>\n          <div style={{ fontSize: '18px', fontWeight: 'bold', color: '#666', marginBottom: '8px', textAlign: 'left' }}>4</div>\n          <div className=\"fourth-column\" ref={fourthColumnRef}>\n            <div className=\"modeList\">\n              <div style={{ marginBottom: '15px', display: 'flex', alignItems: 'center', gap: '10px' }}>\n                <label style={{ fontWeight: 'bold', color: '#333', whiteSpace: 'nowrap' }}>ëŒ€ì‚¬ ì–¸ì–´:</label>\n                <select\n                  value={selectedLanguage2}\n                  onChange={(e) => setSelectedLanguage2(e.target.value)}\n                  style={{\n                    padding: '8px 12px',\n                    border: '1px solid #ccc',\n                    borderRadius: '4px',\n                    fontSize: '14px',\n                    backgroundColor: 'white',\n                    color: '#333',\n                    flex: 1\n                  }}\n                >\n                  <option value=\"í•œêµ­ì–´\">í•œêµ­ì–´</option>\n                  <option value=\"ì¼ë³¸ì–´\">ì¼ë³¸ì–´</option>\n                  <option value=\"ì˜ì–´\">ì˜ì–´</option>\n                </select>\n              </div>\n\n              {Object.entries(analysisTypes2).map(([type, prompt]) => (\n                <div key={type}>\n                  <button\n                    className={c('button', {\n                      active: expandedAnalysis2 === type,\n                    })}\n                    onClick={() => {\n                      if (expandedAnalysis2 === type) {\n                        // ì´ë¯¸ ì„ íƒëœ ë²„íŠ¼ì„ ë‹¤ì‹œ ëˆ„ë¥´ë©´ ì•„ì½”ë””ì–¸ ë‹«ê¸°\n                        setExpandedAnalysis2('');\n                      } else {\n                        // ìƒˆë¡œìš´ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì„ íƒ + ì•„ì½”ë””ì–¸ ì—´ê¸°\n                        setExpandedAnalysis2(type);\n                        // 4ë²ˆì§¸ ì¹¼ëŸ¼ì„ ì¤‘ì•™ìœ¼ë¡œ ìŠ¤í¬ë¡¤\n                        setTimeout(() => scrollToColumn(fourthColumnRef), 100);\n                      }\n                    }}\n                    style={{width: '100%', display: 'flex', justifyContent: 'space-between', alignItems: 'center'}}\n                  >\n                    <span>\n                      <span className=\"emoji\">{type === 'ì»¤ìŠ¤í…€' ? 'ğŸ”§' : type === '3ì´ˆ í›„í‚¹' ? 'âš¡' : type === 'ì •ë³´ë ¥ ë§Œë ™' ? 'ğŸ§ ' : type === 'ë°”ì´ëŸ´ ëŒ€ì‚¬' ? 'ğŸ’¬' : 'ğŸ“'}</span> {type}\n                    </span>\n                    <span \n                      style={{cursor: 'pointer', fontSize: '12px', transform: expandedAnalysis2 === type ? 'rotate(180deg)' : 'rotate(0deg)', transition: 'transform 0.2s'}}\n                    >\n                      â–¼\n                    </span>\n                  </button>\n                  {expandedAnalysis2 === type && (\n                    <div style={{\n                      background: 'var(--background)',\n                      border: '1px solid var(--border)',\n                      borderTop: 'none',\n                      borderRadius: '0 0 4px 4px',\n                      padding: '15px',\n                      fontSize: '13px',\n                      color: 'var(--text)',\n                      lineHeight: '1.4'\n                    }}>\n                      {type === 'ì»¤ìŠ¤í…€' ? (\n                        <div>\n                          <textarea\n                            placeholder=\"ì»¤ìŠ¤í…€ ë¶„ì„ì„ ìœ„í•œ í”„ë¡¬í”„íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”...\"\n                            value={customAnalysisPrompt2}\n                            onChange={(e) => setCustomAnalysisPrompt2(e.target.value)}\n                            rows={4}\n                            style={{\n                              width: '100%',\n                              padding: '8px',\n                              border: '1px solid var(--border)',\n                              borderRadius: '4px',\n                              background: 'var(--highlight)',\n                              color: 'var(--text)',\n                              fontSize: '13px',\n                              fontFamily: 'inherit',\n                              resize: 'vertical'\n                            }}\n                          />\n                        </div>\n                      ) : (\n                        <div>\n                          <strong>í”„ë¡¬í”„íŠ¸:</strong><br/>\n                          <div style={{ whiteSpace: 'pre-wrap' }}>\n                            {prompt.replace(/\\\\n/g, '\\n')}\n                          </div>\n                        </div>\n                      )}\n                    </div>\n                  )}\n                </div>\n              ))}\n            </div>\n            \n            <div style={{ marginTop: '20px' }}>\n              <button\n                className=\"button generateButton\"\n                onClick={() => {\n                  if (expandedAnalysis2) {\n                    handleAnalyzeContent2(expandedAnalysis2);\n                  } else {\n                    alert('ë¶„ì„ íƒ€ì…ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');\n                  }\n                }}\n                disabled={\n                  !apiKey.trim() || \n                  !expandedAnalysis2 ||\n                  (expandedAnalysis2 === 'ì»¤ìŠ¤í…€' && !customAnalysisPrompt2.trim())\n                }>\n                ğŸ¬ ëŒ€ì‚¬ ë§Œë“¤ê¸°\n              </button>\n              \n              {isLoadingScript && <LoadingMessage />}\n            </div>\n          </div>\n          \n          {analysisResult2 && (\n            <>\n              <div style={{\n                marginTop: '20px',\n                padding: '15px',\n                background: '#f8f9fa',\n                border: '1px solid #dee2e6',\n                borderRadius: '6px',\n                color: '#333'\n              }}>\n                <h4 style={{ marginBottom: '10px', color: '#333' }}>\n                  ë¶„ì„ ê²°ê³¼ ({selectedAnalysisType2}):\n                </h4>\n                <div style={{ \n                  whiteSpace: 'pre-wrap', \n                  lineHeight: '1.6',\n                  fontSize: '14px',\n                  color: '#333'\n                }}>\n                  {analysisResult2.replace(/\\\\n/g, '\\n')}\n                </div>\n              </div>\n              \n              <div style={{\n                marginTop: '15px',\n                padding: '12px',\n                background: '#e8f4f8',\n                border: '1px solid #bee5eb',\n                borderRadius: '6px',\n                color: '#0c5460',\n                fontSize: '13px'\n              }}>\n                <div style={{ marginBottom: '15px' }}>\n                  ì´ ëŒ€ì‚¬ë¥¼ ë‚´ ìŠ¤íƒ€ì¼ë¡œ ë°”ê¾¸ê³ ì‹¶ë‹¤ë©´, ì˜ëœ ì˜ˆì‹œ 3ê°œë¥¼ ì˜¬ë ¤ì£¼ì„¸ìš”\n                </div>\n                \n                <div style={{ display: 'flex', flexDirection: 'column', gap: '8px' }}>\n                  {['example1', 'example2', 'example3'].map((fileKey, index) => (\n                    <div key={fileKey} style={{ display: 'flex', flexDirection: 'column', gap: '4px' }}>\n                      {!uploadedFiles[fileKey] ? (\n                        <label style={{\n                          padding: '8px 12px',\n                          background: 'white',\n                          border: '1px solid #bee5eb',\n                          borderRadius: '4px',\n                          color: '#0c5460',\n                          fontSize: '12px',\n                          cursor: 'pointer',\n                          transition: 'background-color 0.2s',\n                          display: 'inline-block',\n                          textAlign: 'center'\n                        }}\n                        onMouseOver={(e) => e.target.style.backgroundColor = '#f0f9ff'}\n                        onMouseOut={(e) => e.target.style.backgroundColor = 'white'}>\n                          ğŸ“ ì˜ëœ ì˜ˆì‹œ{index + 1}.txt ì—…ë¡œë“œ\n                          <input\n                            type=\"file\"\n                            accept=\".txt\"\n                            style={{ display: 'none' }}\n                            onChange={(e) => {\n                              const file = e.target.files?.[0];\n                              if (file) {\n                                handleFileUpload(fileKey, file);\n                              }\n                            }}\n                          />\n                        </label>\n                      ) : (\n                        <div style={{ \n                          display: 'flex', \n                          alignItems: 'center', \n                          justifyContent: 'space-between',\n                          padding: '8px 12px',\n                          background: '#f0f9ff',\n                          border: '1px solid #bee5eb',\n                          borderRadius: '4px'\n                        }}>\n                          <span style={{ \n                            color: '#0c5460', \n                            fontSize: '12px',\n                            flex: 1,\n                            overflow: 'hidden',\n                            textOverflow: 'ellipsis',\n                            whiteSpace: 'nowrap'\n                          }}>\n                            ğŸ“„ {uploadedFiles[fileKey].name}\n                          </span>\n                          <button\n                            onClick={() => handleFileDelete(fileKey)}\n                            style={{\n                              background: 'transparent',\n                              border: 'none',\n                              color: '#dc3545',\n                              fontSize: '12px',\n                              cursor: 'pointer',\n                              marginLeft: '8px',\n                              padding: '2px 6px',\n                              borderRadius: '3px'\n                            }}\n                            onMouseOver={(e) => e.target.style.backgroundColor = '#ffebee'}\n                            onMouseOut={(e) => e.target.style.backgroundColor = 'transparent'}\n                          >\n                            ì‚­ì œ\n                          </button>\n                        </div>\n                      )}\n                    </div>\n                  ))}\n                </div>\n                \n                <button\n                  onClick={handleRewriteWithExamples}\n                  style={{\n                    marginTop: '12px',\n                    padding: '10px 16px',\n                    background: '#17a2b8',\n                    color: 'white',\n                    border: 'none',\n                    borderRadius: '6px',\n                    fontSize: '13px',\n                    cursor: 'pointer',\n                    width: '100%',\n                    transition: 'background-color 0.2s'\n                  }}\n                  onMouseOver={(e) => e.target.style.backgroundColor = '#138496'}\n                  onMouseOut={(e) => e.target.style.backgroundColor = '#17a2b8'}\n                  disabled={Object.values(uploadedFiles).every(file => file === null)}\n                >\n                  ğŸ“ ì´ ì˜ˆì‹œë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì¬ì‘ì„±í•˜ê¸°\n                </button>\n                \n                {isLoadingRewrite && (\n                  <div style={{ marginTop: '10px', textAlign: 'center' }}>\n                    <LoadingMessage />\n                  </div>\n                )}\n                \n                {rewrittenResult && (\n                  <div style={{\n                    marginTop: '15px',\n                    padding: '15px',\n                    background: '#f0fff4',\n                    border: '1px solid #90ee90',\n                    borderRadius: '6px',\n                    color: '#333'\n                  }}>\n                    <h4 style={{ marginBottom: '10px', color: '#2d5016' }}>\n                      ì¬ì‘ì„±ëœ ëŒ€ì‚¬:\n                    </h4>\n                    <div style={{ \n                      whiteSpace: 'pre-wrap', \n                      lineHeight: '1.6',\n                      fontSize: '14px',\n                      color: '#333'\n                    }}>\n                      {rewrittenResult.replace(/\\\\n/g, '\\n')}\n                    </div>\n                  </div>\n                )}\n              </div>\n            </>\n          )}\n        </div>\n\n        <div>\n          <div style={{ fontSize: '18px', fontWeight: 'bold', color: '#666', marginBottom: '8px', textAlign: 'left' }}>5</div>\n          <div className=\"fifth-column\" ref={fifthColumnRef}>\n            <div style={{ marginBottom: '15px' }}>\n              <div style={{ display: 'flex', alignItems: 'center', gap: '10px', marginBottom: '10px' }}>\n                <label style={{ fontWeight: 'bold', color: '#333', whiteSpace: 'nowrap', fontSize: '16px' }}>ìŒì„± ì„ íƒ:</label>\n                <div style={{ position: 'relative', flex: 1 }}>\n                  <button\n                    onClick={() => {\n                      setShowVoiceDropdown(!showVoiceDropdown);\n                      setTimeout(() => scrollToColumn(fifthColumnRef), 100);\n                    }}\n                    style={{\n                      width: '100%',\n                      padding: '8px 12px',\n                      border: '1px solid #ccc',\n                      borderRadius: '4px',\n                      fontSize: '14px',\n                      backgroundColor: 'white',\n                      color: '#333',\n                      cursor: 'pointer',\n                      display: 'flex',\n                      justifyContent: 'space-between',\n                      alignItems: 'center',\n                      textAlign: 'left'\n                    }}\n                  >\n                    <span>{selectedVoice}</span>\n                    <span style={{ transform: showVoiceDropdown ? 'rotate(180deg)' : 'rotate(0deg)', transition: 'transform 0.2s' }}>â–¼</span>\n                  </button>\n                  \n                  {showVoiceDropdown && (\n                    <div style={{\n                      position: 'absolute',\n                      top: '100%',\n                      left: 0,\n                      width: '360px',\n                      backgroundColor: 'white',\n                      border: '1px solid #ccc',\n                      borderTop: 'none',\n                      borderRadius: '0 0 4px 4px',\n                      boxShadow: '0 2px 4px rgba(0,0,0,0.1)',\n                      zIndex: 1000,\n                      padding: '15px'\n                    }}>\n                      <div style={{\n                        display: 'grid',\n                        gridTemplateColumns: 'repeat(3, 1fr)',\n                        gap: '12px'\n                      }}>\n                        {voiceOptions.map((voice, index) => (\n                          <div\n                            key={voice}\n                            onClick={() => {\n                              setSelectedVoice(voice);\n                              setShowVoiceDropdown(false);\n                            }}\n                            style={{\n                              display: 'flex',\n                              flexDirection: 'column',\n                              alignItems: 'center',\n                              padding: '12px',\n                              border: selectedVoice === voice ? '2px solid #2872E3' : '1px solid #ddd',\n                              borderRadius: '6px',\n                              backgroundColor: selectedVoice === voice ? '#f0f7ff' : 'white',\n                              cursor: 'pointer',\n                              width: '100px',\n                              height: '100px',\n                              justifyContent: 'center',\n                              gap: '8px'\n                            }}\n                            onMouseEnter={(e) => {\n                              if (selectedVoice !== voice) {\n                                e.currentTarget.style.backgroundColor = '#f8f9fa';\n                              }\n                            }}\n                            onMouseLeave={(e) => {\n                              if (selectedVoice !== voice) {\n                                e.currentTarget.style.backgroundColor = 'white';\n                              }\n                            }}\n                          >\n                            <span\n                              style={{ \n                                fontWeight: selectedVoice === voice ? 'bold' : 'normal',\n                                fontSize: '15px',\n                                textAlign: 'center',\n                                marginBottom: '4px',\n                                pointerEvents: 'none'\n                              }}\n                            >\n                              {voice}\n                            </span>\n                            <button\n                              onClick={(e) => {\n                                e.stopPropagation();\n                                \n                                if (isPreviewPlaying === voice) {\n                                  // í˜„ì¬ ì¬ìƒ ì¤‘ì¸ ìŒì„±ì´ë©´ ì¼ì‹œì •ì§€\n                                  if (previewAudio) {\n                                    previewAudio.pause();\n                                    setIsPreviewPlaying(null);\n                                  }\n                                } else {\n                                  // ë‹¤ë¥¸ ìŒì„± ì¬ìƒ ì¤‘ì´ë©´ ë¨¼ì € ì •ì§€\n                                  if (previewAudio) {\n                                    previewAudio.pause();\n                                  }\n                                  \n                                  // ìƒˆë¡œìš´ ìŒì„± ì¬ìƒ\n                                  try {\n                                    const audio = new Audio(`voices/${voice}.wav`);\n                                    audio.onended = () => {\n                                      setIsPreviewPlaying(null);\n                                      setPreviewAudio(null);\n                                    };\n                                    audio.onerror = () => {\n                                      console.error('ë¯¸ë¦¬ë“£ê¸° ì¬ìƒ ì˜¤ë¥˜');\n                                      setIsPreviewPlaying(null);\n                                      setPreviewAudio(null);\n                                    };\n                                    \n                                    setPreviewAudio(audio);\n                                    setIsPreviewPlaying(voice);\n                                    audio.play();\n                                  } catch (error) {\n                                    console.error('ë¯¸ë¦¬ë“£ê¸° ì¬ìƒ ì˜¤ë¥˜:', error);\n                                    alert(`${voice} ìŒì„±ì„ ì¬ìƒí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`);\n                                  }\n                                }\n                              }}\n                              style={{\n                                padding: '0',\n                                backgroundColor: 'transparent',\n                                color: 'black',\n                                border: '1px solid #ccc',\n                                borderRadius: '50%',\n                                fontSize: '12px',\n                                cursor: 'pointer',\n                                width: '28px',\n                                height: '28px',\n                                display: 'flex',\n                                alignItems: 'center',\n                                justifyContent: 'center',\n                                transition: 'all 0.2s ease'\n                              }}\n                            >\n                              {isPreviewPlaying === voice ? (\n                                <div style={{\n                                  display: 'flex',\n                                  gap: '2px'\n                                }}>\n                                  <div style={{\n                                    width: '3px',\n                                    height: '8px',\n                                    backgroundColor: 'black'\n                                  }}></div>\n                                  <div style={{\n                                    width: '3px',\n                                    height: '8px',\n                                    backgroundColor: 'black'\n                                  }}></div>\n                                </div>\n                              ) : (\n                                <div style={{\n                                  width: '0',\n                                  height: '0',\n                                  borderLeft: '6px solid black',\n                                  borderTop: '4px solid transparent',\n                                  borderBottom: '4px solid transparent',\n                                  marginLeft: '1px'\n                                }}></div>\n                              )}\n                            </button>\n                          </div>\n                        ))}\n                      </div>\n                    </div>\n                  )}\n                </div>\n              </div>\n            </div>\n            \n            <textarea\n              placeholder=\"ëŒ€ì‚¬ë¥¼ ë„£ì–´ì£¼ì„¸ìš”.\"\n              value={scriptText}\n              onChange={(e) => setScriptText(e.target.value)}\n              onFocus={() => {\n                setTimeout(() => scrollToColumn(fifthColumnRef), 100);\n              }}\n              style={{\n                width: '100%',\n                height: '430px',\n                marginTop: '0',\n                padding: '15px',\n                border: '1px solid #ccc',\n                borderRadius: '6px',\n                fontSize: '14px',\n                fontFamily: 'inherit',\n                resize: 'vertical',\n                backgroundColor: 'white',\n                color: '#333'\n              }}\n            />\n            \n            <div style={{ marginTop: '10px' }}>\n              <button\n                className=\"button generateButton\"\n                onClick={async () => {\n                  if (!scriptText.trim()) {\n                    alert('ëŒ€ì‚¬ë¥¼ ë¨¼ì € ì…ë ¥í•´ì£¼ì„¸ìš”.');\n                    return;\n                  }\n                  \n                  setIsGeneratingVoice(true);\n                  setGeneratedAudio(null);\n                  \n                  try {\n                    console.log(`${selectedVoice} ìŒì„±ìœ¼ë¡œ TTS ìƒì„± ì‹œì‘...`);\n                    \n                    // TTS ëª¨ë“ˆì„ ì‚¬ìš©í•˜ì—¬ ìŒì„± ìƒì„± (ì¬ìƒí•˜ì§€ ì•ŠìŒ)\n                    const result = await generateVoice({\n                      text: scriptText,\n                      userVoice: selectedVoice,\n                      apiKey: apiKey\n                    });\n                    \n                    if (result.success && result.audioBuffer) {\n                      setGeneratedAudio(result.audioBuffer);\n                    } else {\n                      alert(`ìŒì„± ìƒì„± ì‹¤íŒ¨: ${result.error || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜'}`);\n                    }\n                  } catch (error) {\n                    console.error('TTS ì˜¤ë¥˜:', error);\n                    alert('TTS ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');\n                  } finally {\n                    setIsGeneratingVoice(false);\n                  }\n                }}\n                disabled={!apiKey.trim() || !scriptText.trim() || isGeneratingVoice}>\n                ğŸµ ìŒì„± ìƒì„±í•˜ê¸°\n              </button>\n              \n              {/* ìŒì„± ìƒì„± ë¡œë”© ë©”ì‹œì§€ */}\n              {isGeneratingVoice && <LoadingMessage type=\"voice\" />}\n              \n              {/* ìŒì•… í”Œë ˆì´ì–´ UI */}\n              {generatedAudio && (\n                <div style={{\n                  marginTop: '15px',\n                  padding: '12px',\n                  background: '#f8f9fa',\n                  border: '1px solid #dee2e6',\n                  borderRadius: '8px',\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: '12px'\n                }}>\n                  {/* í”Œë ˆì´/ì¼ì‹œì •ì§€ ë²„íŠ¼ */}\n                  <button\n                    onClick={async () => {\n                      if (isPlaying && currentAudio) {\n                        // ì¼ì‹œì •ì§€\n                        currentAudio.pause();\n                        setIsPlaying(false);\n                      } else {\n                        // ì¬ìƒ\n                        try {\n                          // ê¸°ì¡´ ì˜¤ë””ì˜¤ ì •ë¦¬\n                          if (currentAudio) {\n                            currentAudio.pause();\n                            currentAudio.currentTime = 0;\n                          }\n\n                          const audioBlob = new Blob([generatedAudio], { type: 'audio/wav' });\n                          const audioUrl = URL.createObjectURL(audioBlob);\n                          const audio = new Audio(audioUrl);\n                          \n                          audio.onloadedmetadata = () => {\n                            setDuration(audio.duration);\n                          };\n                          \n                          audio.ontimeupdate = () => {\n                            setCurrentTime(audio.currentTime);\n                          };\n                          \n                          audio.onended = () => {\n                            setIsPlaying(false);\n                            setCurrentTime(0);\n                            URL.revokeObjectURL(audioUrl);\n                            setCurrentAudio(null);\n                          };\n                          \n                          audio.onerror = () => {\n                            setIsPlaying(false);\n                            setCurrentTime(0);\n                            URL.revokeObjectURL(audioUrl);\n                            setCurrentAudio(null);\n                            alert('ì˜¤ë””ì˜¤ ì¬ìƒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');\n                          };\n                          \n                          setCurrentAudio(audio);\n                          await audio.play();\n                          setIsPlaying(true);\n                        } catch (error) {\n                          console.error('ì¬ìƒ ì˜¤ë¥˜:', error);\n                          alert('ì˜¤ë””ì˜¤ ì¬ìƒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');\n                          setIsPlaying(false);\n                        }\n                      }\n                    }}\n                    style={{\n                      width: '40px',\n                      height: '40px',\n                      borderRadius: '50%',\n                      backgroundColor: 'transparent',\n                      color: 'black',\n                      border: '2px solid #ccc',\n                      cursor: 'pointer',\n                      display: 'flex',\n                      alignItems: 'center',\n                      justifyContent: 'center',\n                      fontSize: '14px',\n                      transition: 'all 0.2s ease'\n                    }}\n                    onMouseOver={(e) => {\n                      e.target.style.backgroundColor = '#f0f0f0';\n                      e.target.style.borderColor = '#999';\n                    }}\n                    onMouseOut={(e) => {\n                      e.target.style.backgroundColor = 'transparent';\n                      e.target.style.borderColor = '#ccc';\n                    }}\n                  >\n                    {isPlaying ? (\n                      <div style={{\n                        width: '12px',\n                        height: '12px',\n                        display: 'flex',\n                        gap: '2px'\n                      }}>\n                        <div style={{\n                          width: '4px',\n                          height: '12px',\n                          backgroundColor: 'black'\n                        }}></div>\n                        <div style={{\n                          width: '4px',\n                          height: '12px',\n                          backgroundColor: 'black'\n                        }}></div>\n                      </div>\n                    ) : (\n                      <div style={{\n                        width: '0',\n                        height: '0',\n                        borderLeft: '10px solid black',\n                        borderTop: '6px solid transparent',\n                        borderBottom: '6px solid transparent',\n                        marginLeft: '2px'\n                      }}></div>\n                    )}\n                  </button>\n                  \n                  {/* ì˜¤ë””ì˜¤ ì •ë³´ì™€ í”„ë¡œê·¸ë ˆìŠ¤ë°” */}\n                  <div style={{ flex: 1 }}>\n                    <div style={{ \n                      fontSize: '14px', \n                      fontWeight: '500',\n                      color: '#333',\n                      marginBottom: '8px'\n                    }}>\n                      ìƒì„±ëœ ìŒì„± ({selectedVoice})\n                    </div>\n                    \n                    {/* í”„ë¡œê·¸ë ˆìŠ¤ë°” */}\n                    <div style={{ marginBottom: '6px' }}>\n                      <div style={{\n                        width: '100%',\n                        height: '4px',\n                        backgroundColor: '#e0e0e0',\n                        borderRadius: '2px',\n                        overflow: 'hidden',\n                        cursor: 'pointer'\n                      }}\n                      onClick={(e) => {\n                        if (currentAudio && duration > 0) {\n                          const rect = e.currentTarget.getBoundingClientRect();\n                          const clickX = e.clientX - rect.left;\n                          const percentage = clickX / rect.width;\n                          const newTime = percentage * duration;\n                          currentAudio.currentTime = newTime;\n                          setCurrentTime(newTime);\n                        }\n                      }}>\n                        <div style={{\n                          width: `${duration > 0 ? (currentTime / duration) * 100 : 0}%`,\n                          height: '100%',\n                          backgroundColor: '#007bff',\n                          transition: 'width 0.1s ease'\n                        }} />\n                      </div>\n                    </div>\n                    \n                    {/* ì‹œê°„ í‘œì‹œ */}\n                    <div style={{ \n                      fontSize: '12px', \n                      color: '#666',\n                      display: 'flex',\n                      justifyContent: 'space-between'\n                    }}>\n                      <span>{formatTime(currentTime)}</span>\n                      <span>{formatTime(duration)}</span>\n                    </div>\n                  </div>\n                  \n                  {/* ë‹¤ìš´ë¡œë“œ ë²„íŠ¼ */}\n                  <button\n                    onClick={() => {\n                      const audioBlob = new Blob([generatedAudio], { type: 'audio/wav' });\n                      const url = URL.createObjectURL(audioBlob);\n                      \n                      const link = document.createElement('a');\n                      link.href = url;\n                      link.download = `generated-voice-${selectedVoice}.wav`;\n                      document.body.appendChild(link);\n                      link.click();\n                      document.body.removeChild(link);\n                      \n                      URL.revokeObjectURL(url);\n                    }}\n                    style={{\n                      padding: '8px 12px',\n                      backgroundColor: '#28a745',\n                      color: 'white',\n                      border: 'none',\n                      borderRadius: '4px',\n                      fontSize: '12px',\n                      cursor: 'pointer',\n                      display: 'flex',\n                      alignItems: 'center',\n                      gap: '4px'\n                    }}\n                  >\n                    â¬‡ï¸ ë‹¤ìš´ë¡œë“œ\n                  </button>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n\n        <div>\n          <div style={{ fontSize: '18px', fontWeight: 'bold', color: '#666', marginBottom: '8px', textAlign: 'left' }}>6</div>\n          <div className=\"sixth-column\" ref={sixthColumnRef}>\n            <div style={{ marginBottom: '15px' }}>\n              <h3 style={{ fontWeight: 'bold', color: '#333', fontSize: '16px', margin: 0 }}>ê´€ë ¨ ì˜ìƒ ë” ì°¾ê¸°</h3>\n            </div>\n            \n            <div style={{ marginBottom: '15px' }}>\n              <button\n                className=\"button generateButton\"\n                onClick={handleKeywordExtraction}\n                disabled={!apiKey.trim() || !youtubeVideoId || isExtractingKeywords}\n                style={{ width: '100%', marginBottom: '15px' }}\n              >\n                {isExtractingKeywords ? 'ğŸ”„ í‚¤ì›Œë“œ ì¶”ì¶œ ì¤‘...' : 'ğŸ” ì˜ìƒì˜ í‚¤ì›Œë“œ ì¶”ì¶œ'}\n              </button>\n              \n              <div style={{\n                marginTop: '10px',\n                marginBottom: '15px',\n                minHeight: '120px',\n                padding: '15px',\n                background: extractedKeywords ? '#f8f9fa' : '#fafafa',\n                border: '1px solid #dee2e6',\n                borderRadius: '6px',\n                color: '#333'\n              }}>\n                <h4 style={{ \n                  marginBottom: '10px', \n                  color: '#333', \n                  fontSize: '14px',\n                  fontWeight: 'bold'\n                }}>\n                  ì¶”ì¶œëœ í‚¤ì›Œë“œ:\n                </h4>\n                <div style={{ \n                  minHeight: '80px'\n                }}>\n                  {extractedKeywords ? (\n                    extractedKeywords.split('\\n').filter(keyword => keyword.trim()).map((keyword, index) => (\n                      <div key={index} style={{\n                        display: 'flex',\n                        alignItems: 'center',\n                        marginBottom: '8px',\n                        padding: '6px 0',\n                        fontSize: '13px',\n                        color: '#333'\n                      }}>\n                        <span style={{ flex: 1 }}>\n                          {keyword.trim()}\n                        </span>\n                        <button\n                          onClick={() => {\n                            navigator.clipboard.writeText(keyword.trim());\n                            // ë³µì‚¬ ì™„ë£Œ ì•Œë¦¼ì„ ìœ„í•œ ê°„ë‹¨í•œ í”¼ë“œë°±\n                            const btn = document.activeElement as HTMLButtonElement;\n                            const originalText = btn.innerHTML;\n                            btn.innerHTML = 'âœ…';\n                            setTimeout(() => {\n                              btn.innerHTML = originalText;\n                            }, 1000);\n                          }}\n                          style={{\n                            marginLeft: '8px',\n                            padding: '4px 6px',\n                            backgroundColor: 'transparent',\n                            border: '1px solid #ccc',\n                            borderRadius: '3px',\n                            cursor: 'pointer',\n                            fontSize: '12px',\n                            color: '#666'\n                          }}\n                          onMouseEnter={(e) => {\n                            e.currentTarget.style.backgroundColor = '#f0f0f0';\n                          }}\n                          onMouseLeave={(e) => {\n                            e.currentTarget.style.backgroundColor = 'transparent';\n                          }}\n                          title=\"í‚¤ì›Œë“œ ë³µì‚¬\"\n                        >\n                          ğŸ“‹\n                        </button>\n                      </div>\n                    ))\n                  ) : (\n                    <div style={{ \n                      color: '#999',\n                      fontSize: '13px',\n                      lineHeight: '1.8'\n                    }}>\n                      í‚¤ì›Œë“œ ì¶”ì¶œ ë²„íŠ¼ì„ ëˆŒëŸ¬ì„œ ì˜ìƒì˜ í‚¤ì›Œë“œë¥¼ ì¶”ì¶œí•´ë³´ì„¸ìš”.\n                    </div>\n                  )}\n                </div>\n              </div>\n            </div>\n            \n            <button\n              className=\"button generateButton\"\n              onClick={() => {\n                alert('ê´€ë ¨ ì˜ìƒ ê²€ìƒ‰ (ì¤€ë¹„ ì¤‘)');\n                setTimeout(() => scrollToColumn(sixthColumnRef), 100);\n              }}>\n              ğŸ” í™ˆìœ¼ë¡œ ê°€ì„œ ê´€ë ¨ ì˜ìƒ ë” ì°¾ê¸°\n            </button>\n            \n            <div style={{\n              marginTop: '10px',\n              padding: '10px',\n              backgroundColor: '#fff3cd',\n              border: '1px solid #ffeaa7',\n              borderRadius: '4px',\n              fontSize: '12px',\n              color: '#856404',\n              lineHeight: '1.4'\n            }}>\n              âš ï¸ í™ˆìœ¼ë¡œ ì´ë™í•˜ë©´ ì´ê³³ì˜ ë‚´ìš©ì´ ì „ë¶€ ìƒˆë¡œê³ ì¹¨ë©ë‹ˆë‹¤. ì¤‘ìš”í•œ ì •ë³´ëŠ” ë‹¤ìš´ë¡œë“œì™€ ë³µì‚¬í•´ë†“ìœ¼ì„¸ìš”\n            </div>\n          </div>\n      </div>\n    </main>\n  );\n}\n"
        }
    ]
}